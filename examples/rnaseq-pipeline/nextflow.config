/*
 * Configuration for Illumina FASTQ Filename Parsing Example
 * Demonstrates nf-pregex plugin for real-world regex problems
 */

// Enable nf-pregex plugin
plugins {
    id 'nf-pregex@1.0.0'
}

// Manifest
manifest {
    name = 'nf-pregex-illumina-parsing'
    author = 'Marcel Ribeiro-Dantas <marcel@seqera.io>'
    description = 'Real-world example: Parse Illumina FASTQ filenames with nf-pregex'
    mainScript = 'main.nf'
    version = '1.0.0'
    nextflowVersion = '>=23.10.0'
}

// Default parameters
params {
    // Input files - Illumina format: SAMPLE_S#_L###_R#_###.fastq.gz
    reads = "data/*_S*_L*_R*_*.fastq.gz"
    
    // Output directory
    outdir = "results"
    
    // Help message
    help = false
}

// Process configuration
process {
    // Minimal resources for parsing example
    cpus = 1
    memory = '1.GB'
    time = '10.m'
    
    withName: 'PARSE_AND_QC' {
        cpus = 1
        memory = '512.MB'
    }
}

// Executor configuration
executor {
    name = 'local'
    cpus = 8
    memory = '16.GB'
}

// Reporting
report {
    enabled = true
    file = "${params.outdir}/pipeline_report.html"
    overwrite = true
}

timeline {
    enabled = true
    file = "${params.outdir}/timeline.html"
    overwrite = true
}

trace {
    enabled = true
    file = "${params.outdir}/trace.txt"
    overwrite = true
}

// Profiles
profiles {
    standard {
        process.executor = 'local'
    }
    
    test {
        params {
            reads = "${projectDir}/test_data/*_S*_L*_R*_*.fastq.gz"
            outdir = "test_results"
        }
    }
}
